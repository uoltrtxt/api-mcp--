box-sizing: border-box;
padding: 6px;
border: 1px solid #444;
border-radius: 4px;
background-color: #2c2c2c;
color: #e0e0e0;
resize: vertical;
}
.actions {
margin-top: 10px;
}
.actions button {
margin-right: 5px;
padding: 6px 12px;
border: none;
border-radius: 4px;
background-color: #007acc;
color: #fff;
cursor: pointer;
}
.actions button:disabled {
background-color: #444;
cursor: not-allowed;
}
#outputArea {
  margin-bottom: 12px;
  padding: 6px;
  border: 1px solid #444;
  border-radius: 4px;
  min-height: 160px;
        max-height: 260px;
        background-color: #1a1a1a;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .message {
        padding: 6px 8px;
        border-radius: 6px;
        background-color: #2a2a2a;
        white-space: pre-line;
      }
      .message.user {
        background-color: #224a6b;
      }
      .message.gpt {
        background-color: #2f3b2f;
      }
      .message.mcp {
        background-color: #3b2f3a;
      }
      .message.system {
        background-color: #3a3a3a;
        font-size: 12px;
      }
      .field-inline {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .field-inline label {
        margin-bottom: 0;
      }
      .field-inline button {
        padding: 4px 10px;
        border-radius: 4px;
        border: none;
        background-color: #555;
        color: #fff;
        cursor: pointer;
      }
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.6);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 999;
      }
      .modal-backdrop.open {
        display: flex;
      }
      .modal {
        width: 90%;
        max-width: 360px;
        background-color: #1f1f1f;
        border: 1px solid #444;
        border-radius: 8px;
        padding: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      }
      .modal-header {
        font-size: 14px;
        margin-bottom: 8px;
      }
      .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
        margin-top: 10px;
      }
      .api-status {
        font-size: 12px;
        color: #9db7c9;
      }
      .mcp-status {
        font-size: 12px;
        color: #9bd1b7;
      }
    </style>
  </head>
  <body>
    <h2>ChatBot &amp; Marker Panel</h2>
    <!-- Output area to display responses from GPT or MCP -->
    <div id="outputArea" aria-live="polite"></div>
    <!-- API key input field -->
    <div class="field field-inline">
      <label>OpenAI API 키</label>
      <button id="openApiKeyModalBtn" type="button">API 키 설정</button>
      <span id="apiKeyStatus" class="api-status">미설정</span>
    </div>
    <div class="field">
      <label for="mcpServerUrl">MCP 서버 주소</label>
      <input id="mcpServerUrl" type="text" readonly />
      <div class="field field-inline">
        <button id="startMcpServerBtn" type="button">MCP 서버 시작</button>
        <button id="copyMcpServerBtn" type="button">주소 복사</button>
        <span id="mcpServerStatus" class="mcp-status">중지됨</span>
      </div>
    </div>
    <!-- Prompt input field -->
    <div class="field">
      <label for="promptInput">프롬프트</label>
      <textarea id="promptInput" rows="3" placeholder="AI에게 질문을 입력하세요"></textarea>
    </div>
  </div>
  <!-- Buttons to perform actions -->
  <div class="actions">
    <button id="callGPTBtn">ChatGPT 호출</button>
    <button id="addMarkerBtn">재생헤드에 마커 추가</button>
    </div>
    <div class="field">
      <label for="codeInput">실행할 ExtendScript 코드</label>
      <textarea id="codeInput" rows="6" placeholder="ChatGPT가 만든 ExtendScript를 붙여넣으세요."></textarea>
    </div>
    <div class="actions">
      <button id="insertLastCodeBtn" type="button">마지막 GPT 코드 삽입</button>
      <button id="runCodeBtn" type="button">코드 실행</button>
    </div>
    <div id="apiKeyModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="apiKeyModalTitle">
      <div class="modal">
        <div id="apiKeyModalTitle" class="modal-header">OpenAI API 키 입력</div>
        <div class="field">
          <label for="apiKeyInput">API 키</label>
          <input id="apiKeyInput" type="password" placeholder="여기에 붙여넣기" />
        </div>
        <div class="modal-actions">
          <button id="closeApiKeyModalBtn" type="button">닫기</button>
          <button id="saveApiKeyBtn" type="button">저장</button>
        </div>
      </div>
    </div>
  </body>
  </html>